<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Customer Reviews & Gallery</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
    background: #f8f9fa;
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
}
/* Header */
header {
    background: #2563eb;
    color: #fff;
    padding: 1.5rem 0;
    text-align: center;
    position: relative;
}
header h1 { margin: 0; font-size: 1.8rem; font-weight: 700; }
/* Exit Button */
#pageExitBtn {
    position: absolute; top: 10px; right: 15px;
    background: #e53e3e; color: #fff; border: none;
    padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: 600;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2); transition: all 0.3s ease;
}
#pageExitBtn:hover { background: #c53030; }
/* Footer */
footer {
    background: #1e40af;
    color: #fff;
    padding: 1rem 0;
    text-align: center;
    margin-top: 2rem;
    font-size: 0.9rem;
}
/* Main Container */
.main-container {
    max-width: 600px;
    margin: auto;
    padding: 1.5rem 1rem;
}
/* Form Container */
.form-container {
    background: #fff;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 6px 18px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
}
.form-label { font-weight: 600; margin-bottom: .3rem; font-size: .9rem; }
.form-control { border-radius: 6px; padding: 7px 10px; border:1px solid #cbd5e0; font-size: .88rem; }
textarea.form-control { min-height: 70px; resize: vertical; font-size: .88rem; }
.submit-btn {
    background: linear-gradient(45deg,#10b981,#059669);
    color: #fff;
    border: none;
    padding: 8px;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    transition: all .3s ease;
    font-size: .9rem;
}
.submit-btn:hover {
    background: linear-gradient(45deg,#059669,#10b981);
    transform: translateY(-2px);
}
/* Image Previews */
.preview-images { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px; }
.preview-images img { width: 50px; height: 50px; object-fit: cover; border-radius: 5px; }
/* Gallery */
#galleryDisplay { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
#galleryDisplay img { width: 100%; height: 90px; object-fit: cover; border-radius: 8px; transition: transform .2s; }
#galleryDisplay img:hover { transform: scale(1.05); }
/* Section Titles */
section h2 { font-size: 1.2rem; font-weight: 700; color: #1e40af; margin-bottom: 0.8rem; }
/* Star Rating */
.rating {
    direction: rtl;
    display: flex;
    justify-content: flex-start;
}
/* Star Rating */
.rating {
    direction: rtl;
    display: flex;
    justify-content: center; /* Center the stars */
    gap: 5px; /* space between stars */
}
.rating input { display: none; }
.rating label {
    font-size: 2rem; /* increased size */
    color: #cbd5e0;
    cursor: pointer;
    transition: color 0.2s;
}
.rating input:checked ~ label,
.rating label:hover,
.rating label:hover ~ label { color: #facc15; }


/* Responsive */
@media (max-width: 768px){
    #galleryDisplay { grid-template-columns: repeat(2, 1fr); }
    .form-container { padding: 1rem; }
    header h1 { font-size: 1.5rem; }
}
@media (max-width: 480px){
    #galleryDisplay { grid-template-columns: 1fr; }
    .preview-images img { width: 40px; height: 40px; }
    #galleryDisplay img { height: 80px; }
.section-title {
    text-align: center;
}

}
</style>
</head>
<body>

<header>
  <h1>Gagangiri Travels</h1>
  <button id="pageExitBtn">Exit Page</button>
</header>

<div class="main-container">

  <!-- Review Form -->
  <section class="form-container" id="reviewSection">
    <h2>Share Your Experience </h2>
    <form id="reviewForm">
      <div class="mb-2">
        <label for="name" class="form-label">Your Name</label>
        <input type="text" class="form-control" id="name" name="name" placeholder="Enter your Name" required>
      </div>

      <div class="mb-2">
        <label class="form-label">Rating</label>
        <div class="rating">
          <input type="radio" name="rating" id="star5" value="5"><label for="star5">&#9733;</label>
          <input type="radio" name="rating" id="star4" value="4"><label for="star4">&#9733;</label>
          <input type="radio" name="rating" id="star3" value="3"><label for="star3">&#9733;</label>
          <input type="radio" name="rating" id="star2" value="2"><label for="star2">&#9733;</label>
          <input type="radio" name="rating" id="star1" value="1"><label for="star1">&#9733;</label>
        </div>
      </div>

      <div class="mb-2">
        <label for="review" class="form-label">Your Comments</label>
        <textarea class="form-control" id="review" name="review" placeholder="Tell us about your experience..." required></textarea>
      </div>

      <div class="mb-2">
        <label for="pictures" class="form-label">Upload Pictures (optional)</label>
        <input type="file" class="form-control" id="pictures" name="pictures" multiple accept="image/*">
        <div class="preview-images" id="preview-images"></div>
      </div>

      <div class="d-grid">
        <button type="submit" class="submit-btn w-100">Submit Review <i class="fa-solid fa-arrow-right ms-1"></i></button>
      </div>
    </form>
  </section>

  <!-- Gallery Upload Section -->
  <section class="form-container" id="gallerySection">
    <h2>Upload Gallery Images</h2>
    <form id="galleryForm">
      <div class="mb-2">
        <label for="galleryPictures" class="form-label">Select Images</label>
        <input type="file" class="form-control" id="galleryPictures" name="galleryPictures" multiple accept="image/*">
        <div class="preview-images" id="galleryPreview"></div>
      </div>
      <div class="d-grid">
        <button type="submit" class="submit-btn w-100">Upload Images <i class="fa-solid fa-arrow-up ms-1"></i></button>
      </div>
    </form>

    <h2>Gallery</h2>
    <div id="galleryDisplay"></div>
  </section>

</div>

<footer>
  &copy; 2025 MyCompany. All Rights Reserved.
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // Exit page button
  document.getElementById("pageExitBtn").addEventListener("click", () => {
    window.location.href = "index.html";
  });

  // Review image preview
  const picturesInput = document.getElementById('pictures');
  const previewContainer = document.getElementById('preview-images');
  picturesInput.addEventListener('change', function(){
    previewContainer.innerHTML = '';
    Array.from(this.files).forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        const img = document.createElement('img');
        img.src = e.target.result;
        previewContainer.appendChild(img);
      }
      reader.readAsDataURL(file);
    });
  });

  // Submit review
  document.getElementById("reviewForm").addEventListener("submit", e => {
    e.preventDefault();
    const formData = new FormData(e.target);
    fetch("http://localhost:5000/reviews", { method: "POST", body: formData })
      .then(res => res.json())
      .then(data => {
        if(data.success){
          e.target.reset();
          previewContainer.innerHTML = '';
          alert("✅ Review submitted successfully!");
        } else alert("❌ Error submitting review");
      });
  });

  // Gallery preview
  const galleryInput = document.getElementById('galleryPictures');
  const galleryPreview = document.getElementById('galleryPreview');
  const galleryDisplay = document.getElementById('galleryDisplay');
  galleryInput.addEventListener('change', function(){
    galleryPreview.innerHTML = '';
    Array.from(this.files).forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        const imgPreview = document.createElement('img');
        imgPreview.src = e.target.result;
        galleryPreview.appendChild(imgPreview);

        const imgGallery = document.createElement('img');
        imgGallery.src = e.target.result;
        galleryDisplay.appendChild(imgGallery);
      }
      reader.readAsDataURL(file);
    });
  });

  // Submit gallery
  document.getElementById("galleryForm").addEventListener("submit", e => {
    e.preventDefault();
    const formData = new FormData(e.target);
    fetch("http://localhost:5000/gallery", { method: "POST", body: formData })
      .then(res => res.json())
      .then(data => {
        if(data.success){
          e.target.reset();
          galleryPreview.innerHTML = '';
          alert("✅ Images uploaded successfully!");
        } else alert("❌ Error uploading images");
      });
  });

});
</script>

</body>
</html>
